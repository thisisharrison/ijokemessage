(this.webpackJsonpijokemessage=this.webpackJsonpijokemessage||[]).push([[0],{21:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(10),c=r.n(s),o=r(2),i=r(3),u=r(14),l=r(0),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name?e.name:"Dad",r=e.img?Object(l.jsx)("img",{src:e.img,alt:"dad-profile"}):"\ud83d\udc68";return Object(l.jsxs)("div",{className:"header",children:[r," ",t]})},d=(r(21),function(){return Object(l.jsx)("div",{className:"incoming loader","aria-label":"loading...",children:Object(l.jsx)("div",{className:"loadingio-spinner-ellipsis-gpe6sxcudkm",children:Object(l.jsxs)("div",{className:"ldio-ru6yqmoab8",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{})]})})})}),b=a.a.createContext();function f(e){var t=a.a.useState("graphql"),r=Object(o.a)(t,2),n=r[0],s=r[1];return Object(l.jsx)(b.Provider,Object(i.a)({value:[n,s]},e))}function h(){var e=a.a.useContext(b);if(!e)throw new Error("useEndpointContext must be used within EndpointContextProvider");return e}var m=function(e){var t=e.messages,r=e.status,n=e.error,a=h(),s="rest"===Object(o.a)(a,1)[0]?"":" graphql";return Object(l.jsxs)("div",{className:"imessage",children:[t.map((function(e){return Object(l.jsx)("p",{className:"incoming"===e.className?e.className:e.className+s,children:e.joke},e.id)})),"PENDING"===r?Object(l.jsx)(d,{}):null,"REJECTED"===r?Object(l.jsx)("div",{role:"alert",children:n.error}):null]})},O=r(15),p=r(11),g=r.n(p);var v=function(e){var t=e.reply,r=void 0===t?"":t,n=e.onSubmit,s=a.a.useState(r),c=Object(o.a)(s,2),i=c[0],u=c[1],j=a.a.useState(!1),d=Object(o.a)(j,2),b=d[0],f=d[1],h=a.a.useMemo((function(){return new g.a}),[]);if(b)throw{message:"Don't swear at your Dad!"};return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h.isProfane(i)?f(!0):(n(function(e){return{joke:e,className:"outgoing",id:Object(O.a)()}}(i)),u(""))},className:"message-form",autoComplete:"off",children:[Object(l.jsx)("input",{value:i,onChange:function(e){u(e.target.value)},name:"messageForm",id:"messageForm-input",placeholder:"iDad Jokes"}),Object(l.jsx)("button",{type:"submit",disabled:!i.length,children:"Send"})]})})},x=r(5),E=r.n(x),w=r(8);var k=function(){var e=Object(w.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.fetch("https://icanhazdadjoke.com/",{method:"GET",headers:{accept:"application/json"}}).then(function(){var e=Object(w.a)(E.a.mark((function e(t){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(r=e.sent,!t.ok){e.next=13;break}if(null===r||void 0===r?void 0:r.joke){e.next=9;break}return e.abrupt("return",Promise.reject(r));case 9:return r.className="incoming",e.abrupt("return",Promise.resolve(r));case 11:e.next=14;break;case 13:return e.abrupt("return",Promise.reject(r));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t={error:e};return Promise.reject(t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=r(12);function N(e){var t=e.error,r=e.resetErrorBoundary;return Object(l.jsxs)("div",{className:"profanity-fallback",children:[Object(l.jsx)("div",{role:"alert",children:Object(l.jsx)("pre",{children:t.message})}),Object(l.jsx)("button",{onClick:r,children:"Try Again!"})]})}var S=function(e,t){switch(t.type){case"PENDING":return Object.assign({},e,{status:"PENDING",error:null});case"RESOLVED":return Object.assign({},e,{status:"RESOLVED",data:[].concat(Object(u.a)(e.data),[t.data]),error:null,length:e.length+1});case"REJECTED":return Object.assign({},e,{status:"REJECTED",error:t.error});default:throw new Error("What's going on with ".concat(t.type))}};var D=function(e){var t=e.history,r=e.setHistory,n=e.length,s=e.setLength,c=a.a.useState(""),u=Object(o.a)(c,2),d=u[0],b=u[1],f=function(e,t,r){var n=a.a.useReducer(S,Object(i.a)({status:"idle"},e)),s=Object(o.a)(n,2),c=s[0],u=s[1],l=c.length,j=c.data,d=a.a.useCallback((function(e){u({type:"PENDING"}),e.then((function(e){u({type:"RESOLVED",data:e})}),(function(e){u({type:"REJECTED",error:e})}))}),[u]),b=a.a.useRef(l),f=a.a.useCallback((function(){b.current!==l&&(t(j),r(l),b.current=l)}),[j,l,t,r]);return a.a.useEffect((function(){f()}),[f]),Object(i.a)(Object(i.a)({},c),{},{dispatch:u,run:d})}({status:d?"pending":"idle",data:t,length:n},r,s),h=f.data,O=f.status,p=f.error,g=f.dispatch,x=f.run;a.a.useEffect((function(){d&&(g({type:"RESOLVED",data:d}),x(k()),b(""))}),[g,d,x]),window.fetchDadJokes=k;var E=a.a.useRef();return a.a.useLayoutEffect((function(){E.current.scrollTop=E.current.scrollHeight})),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"imessage-container",ref:E,role:"log",children:[Object(l.jsx)(j,{}),Object(l.jsx)(m,{messages:h,status:O,error:p})]}),Object(l.jsx)("div",{children:Object(l.jsx)(y.ErrorBoundary,{FallbackComponent:N,onReset:function(){return b("")},children:Object(l.jsx)(v,{reply:d,onSubmit:function(e){b(e)}})})})]})},C=r(13),R=r.n(C);r(42);var P=function(){var e=h(),t=Object(o.a)(e,2),r=t[0],n=t[1];return Object(l.jsx)(R.a,{checked:"rest"===r,onChange:function(){return n((function(){return"rest"===r?"graphql":"rest"}))},"aria-label":"endpoint-toggle",icons:{checked:"rest",unchecked:"graphql"}})};function J(e,t){var r=a.a.useState((function(){var r=window.localStorage.getItem(e);if(!r)return t;try{return JSON.parse(r)}catch(n){window.localStorage.removeItem(e)}})),n=Object(o.a)(r,2),s=n[0],c=n[1],i=a.a.useRef(e);return a.a.useEffect((function(){i.current!==e&&window.localStorage.removeItem(e),i.current=e,window.localStorage.setItem(e,JSON.stringify(s))}),[e,s]),[s,c]}var I=function(){var e=J("dad-jokes",[]),t=Object(o.a)(e,2),r=t[0],n=t[1],a=J("dad-jokes-length",0),s=Object(o.a)(a,2),c=s[0],i=s[1];return Object(l.jsx)(f,{children:Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)(D,{history:r,setHistory:n,length:c,setLength:i}),Object(l.jsx)(P,{})]})})};r(43);c.a.render(Object(l.jsx)(I,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.60666ef2.chunk.js.map
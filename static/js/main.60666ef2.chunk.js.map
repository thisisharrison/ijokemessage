{"version":3,"sources":["components/Header.js","components/Loader.js","context/context.js","components/MessageDisplay.js","components/MessageForm.js","api.js","components/ErrorBoundary.js","components/Chatroom.js","components/Toggle.js","components/App.js","index.js"],"names":["Header","props","name","img","src","alt","className","Loader","aria-label","EndpointContext","React","createContext","EndpointContextProvider","useState","endPoint","setEndpoint","Provider","value","useEndpointContext","context","useContext","Error","MessageDisplay","messages","status","error","endpointEffect","map","message","joke","id","role","MessageForm","reply","onSubmit","setMessage","unclean","setUnclean","filter","useMemo","Filter","e","preventDefault","isProfane","nanoid","formatMessage","autoComplete","onChange","target","placeholder","type","disabled","length","fetchDadJokes","a","window","fetch","method","headers","accept","then","response","json","data","ok","Promise","reject","resolve","catch","ProfanityFallback","resetErrorBoundary","onClick","jokeReducer","state","action","Object","assign","Chatroom","history","setHistory","setLength","setReply","initialState","useReducer","dispatch","run","useCallback","promise","prevLength","useRef","updateStorage","current","useEffect","useDadJoke","containerRef","useLayoutEffect","scrollTop","scrollHeight","ref","FallbackComponent","onReset","EndpointToggle","endpoint","checked","icons","unchecked","useLocalStorageState","key","records","localStorage","getItem","JSON","parse","removeItem","setState","prevKeyRef","setItem","stringify","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.60666ef2.chunk.js","sourcesContent":["import React from 'react'\n\n// Renders Dad and Profile Image\n// Drop down to click Favorites\nconst Header = (props = {}) => {\n  const name = props.name ? props.name : 'Dad'\n  const img = props.img ? <img src={props.img} alt=\"dad-profile\" /> : 'ðŸ‘¨'\n  return (\n    <div className=\"header\">\n      {img} {name}\n    </div>\n  )\n}\n\nexport default Header\n","import React from 'react'\nimport './loader.css'\n\nconst Loader = () => {\n  return (\n    <div className=\"incoming loader\" aria-label=\"loading...\">\n      <div className=\"loadingio-spinner-ellipsis-gpe6sxcudkm\">\n        <div className=\"ldio-ru6yqmoab8\">\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Loader\n","import React from 'react'\n\nconst EndpointContext = React.createContext()\n\nfunction EndpointContextProvider(props) {\n  const [endPoint, setEndpoint] = React.useState('graphql')\n  return <EndpointContext.Provider value={[endPoint, setEndpoint]} {...props} />\n}\n\nfunction useEndpointContext() {\n  const context = React.useContext(EndpointContext)\n  if (!context) {\n    throw new Error(\n      'useEndpointContext must be used within EndpointContextProvider',\n    )\n  }\n  return context\n}\n\nexport {EndpointContextProvider, useEndpointContext}\n","import React from 'react'\nimport Loader from './Loader'\nimport {useEndpointContext} from '../context/context'\n\nconst MessageDisplay = ({messages, status, error}) => {\n  const [endpoint] = useEndpointContext()\n  const endpointEffect = endpoint === 'rest' ? '' : ' graphql'\n  return (\n    <div className=\"imessage\">\n      {messages.map(message => (\n        <p\n          className={\n            message.className === 'incoming'\n              ? message.className\n              : message.className + endpointEffect\n          }\n          key={message.id}\n        >\n          {message.joke}\n        </p>\n      ))}\n      {status === 'PENDING' ? <Loader /> : null}\n      {status === 'REJECTED' ? <div role=\"alert\">{error.error}</div> : null}\n    </div>\n  )\n}\n\nexport default MessageDisplay\n","import React from 'react'\nimport {nanoid} from 'nanoid'\nimport Filter from 'bad-words'\n\n// add id for key and className for styling\nfunction formatMessage(message) {\n  return {\n    joke: message,\n    className: 'outgoing',\n    id: nanoid(),\n  }\n}\n\n// onSubmit will ccall setReply in Chatroom\n// reply triggers useEffect and calls run from useDadJoke hook\nconst MessageForm = ({reply = '', onSubmit}) => {\n  const [message, setMessage] = React.useState(reply)\n  const [unclean, setUnclean] = React.useState(false)\n  const filter = React.useMemo(() => new Filter(), [])\n\n  function handleSubmit(e) {\n    e.preventDefault()\n    // check if user is swearing\n    if (filter.isProfane(message)) {\n      setUnclean(true)\n    } else {\n      onSubmit(formatMessage(message))\n      setMessage('')\n    }\n  }\n\n  function handleChange(e) {\n    setMessage(e.target.value)\n  }\n\n  if (unclean) throw {message: \"Don't swear at your Dad!\"}\n\n  return (\n    <>\n      <form onSubmit={handleSubmit} className=\"message-form\" autoComplete=\"off\">\n        <input\n          value={message}\n          onChange={handleChange}\n          name=\"messageForm\"\n          id=\"messageForm-input\"\n          placeholder=\"iDad Jokes\"\n        />\n        <button type=\"submit\" disabled={!message.length}>\n          Send\n        </button>\n      </form>\n    </>\n  )\n}\n\nexport default MessageForm\n","function randomDelay() {\n  return new Promise(resolve =>\n    setTimeout(() => {\n      // eslint-disable-next-line no-console\n      return resolve(console.log('I slept well'))\n    }, 1500),\n  )\n}\n\nconst randomDadJoke = () => {\n  return window\n    .fetch('https://icanhazdadjoke.com/', {\n      method: 'GET',\n      headers: {\n        accept: 'application/json',\n      },\n    })\n    .then(async response => {\n      const data = await response.json()\n      if (response.ok) {\n        const joke = data?.joke\n        if (!joke) {\n          return Promise.reject(data)\n        } else {\n          data.className = 'incoming'\n          return Promise.resolve(data)\n        }\n      } else {\n        return Promise.reject(data)\n      }\n    })\n    .catch(error => {\n      const message = {error: error}\n      return Promise.reject(message)\n    })\n}\n\nconst fetchDadJokes = async () => {\n  // await randomDelay()\n  return randomDadJoke()\n}\n\nexport {fetchDadJokes, randomDelay}\n","import React from 'react'\n\nfunction ProfanityFallback({error, resetErrorBoundary}) {\n  return (\n    <div className=\"profanity-fallback\">\n      <div role=\"alert\">\n        <pre>{error.message}</pre>\n      </div>\n      <button onClick={resetErrorBoundary}>Try Again!</button>\n    </div>\n  )\n}\n\nexport {ProfanityFallback}\n","import React from 'react'\nimport Header from './Header'\nimport MessageDisplay from './MessageDisplay'\nimport MessageForm from './MessageForm'\nimport {fetchDadJokes} from '../api'\nimport {ErrorBoundary} from 'react-error-boundary'\nimport {ProfanityFallback} from './ErrorBoundary'\n\nconst jokeReducer = (state, action) => {\n  switch (action.type) {\n    case 'PENDING':\n      return Object.assign({}, state, {status: 'PENDING', error: null})\n    case 'RESOLVED':\n      return Object.assign({}, state, {\n        status: 'RESOLVED',\n        data: [...state.data, action.data],\n        error: null,\n        length: state.length + 1,\n      })\n    case 'REJECTED':\n      return Object.assign({}, state, {\n        status: 'REJECTED',\n        error: action.error,\n      })\n    default:\n      throw new Error(`What's going on with ${action.type}`)\n  }\n}\n\nfunction useDadJoke(initialState, setHistory, setLength) {\n  const [state, dispatch] = React.useReducer(jokeReducer, {\n    status: 'idle',\n    ...initialState,\n  })\n\n  const {length, data} = state\n\n  const run = React.useCallback(\n    promise => {\n      dispatch({type: 'PENDING'})\n      promise.then(\n        data => {\n          dispatch({type: 'RESOLVED', data})\n        },\n        error => {\n          dispatch({type: 'REJECTED', error})\n        },\n      )\n    },\n    [dispatch],\n  )\n\n  const prevLength = React.useRef(length)\n\n  // Only run this when prevLength is out of sync with state length\n  const updateStorage = React.useCallback(() => {\n    if (prevLength.current !== length) {\n      setHistory(data)\n      setLength(length)\n      prevLength.current = length\n    }\n  }, [data, length, setHistory, setLength])\n\n  // store chat history in localStorage\n  React.useEffect(() => {\n    updateStorage()\n  }, [updateStorage])\n\n  return {...state, dispatch, run}\n}\n\n// preload some conversations\nconst Chatroom = ({history, setHistory, length, setLength}) => {\n  const [reply, setReply] = React.useState('')\n\n  const {data, status, error, dispatch, run} = useDadJoke(\n    {\n      status: reply ? 'pending' : 'idle',\n      data: history,\n      length,\n    },\n    setHistory,\n    setLength,\n  )\n\n  React.useEffect(() => {\n    // dad won't speak to me if I don't speak with him\n    if (!reply) {\n      return\n    }\n    dispatch({type: 'RESOLVED', data: reply})\n    run(fetchDadJokes())\n    // reset state\n    setReply('')\n  }, [dispatch, reply, run])\n\n  function handleSubmit(data) {\n    setReply(data)\n  }\n\n  // for debugging\n  window.fetchDadJokes = fetchDadJokes\n\n  const containerRef = React.useRef()\n\n  React.useLayoutEffect(() => {\n    containerRef.current.scrollTop = containerRef.current.scrollHeight\n  })\n\n  return (\n    <div>\n      <div className=\"imessage-container\" ref={containerRef} role=\"log\">\n        <Header />\n        <MessageDisplay messages={data} status={status} error={error} />\n      </div>\n      <div>\n        <ErrorBoundary\n          FallbackComponent={ProfanityFallback}\n          onReset={() => setReply('')}\n        >\n          <MessageForm reply={reply} onSubmit={handleSubmit} />\n        </ErrorBoundary>\n      </div>\n    </div>\n  )\n}\n\nexport default Chatroom\n","import React from 'react'\nimport Toggle from 'react-toggle'\nimport {useEndpointContext} from '../context/context'\n\nimport './toggle.css'\n\nfunction EndpointToggle() {\n  const [endpoint, setEndpoint] = useEndpointContext()\n\n  return (\n    <Toggle\n      checked={endpoint === 'rest' ? true : false}\n      onChange={() =>\n        setEndpoint(() => (endpoint === 'rest' ? 'graphql' : 'rest'))\n      }\n      aria-label=\"endpoint-toggle\"\n      icons={{\n        checked: 'rest',\n        unchecked: 'graphql',\n      }}\n    />\n  )\n}\n\nexport default EndpointToggle\n","import React from 'react'\nimport Chatroom from './Chatroom'\nimport EndpointToggle from './Toggle'\nimport {EndpointContextProvider} from '../context/context'\n\n// To-do:\n// useContext for theme\n\n// returns initial state for chat history and chat length\nfunction useLocalStorageState(key, initialState) {\n  const [state, setState] = React.useState(() => {\n    const records = window.localStorage.getItem(key)\n    if (records) {\n      try {\n        return JSON.parse(records)\n      } catch (error) {\n        window.localStorage.removeItem(key)\n      }\n    } else {\n      return initialState\n    }\n  })\n\n  const prevKeyRef = React.useRef(key)\n\n  React.useEffect(() => {\n    const prevKey = prevKeyRef.current\n    if (prevKey !== key) {\n      window.localStorage.removeItem(key)\n    }\n    prevKeyRef.current = key\n    window.localStorage.setItem(key, JSON.stringify(state))\n  }, [key, state])\n\n  return [state, setState]\n}\n\nfunction App() {\n  const [history, setHistory] = useLocalStorageState('dad-jokes', [])\n  const [length, setLength] = useLocalStorageState('dad-jokes-length', 0)\n  return (\n    <EndpointContextProvider>\n      <div className=\"app\">\n        <Chatroom\n          history={history}\n          setHistory={setHistory}\n          length={length}\n          setLength={setLength}\n        />\n        <EndpointToggle />\n      </div>\n    </EndpointContextProvider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\nimport './index.scss'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}